

declaration
	: INT initialized_decl_list ';'

initialized_declarator_list
        : initialized_declarator { $$ = $1; }
        | initialized_declarator_list ',' initialized_declarator { $$ = ast_push_back($1,$3,NEXT); }
        ;

initialized_declarator
        : declarator
        | declarator '=' initializer { $$ = $1; }
        ;

declarator
        : direct_declarator
        ;

direct_declarator
        : simple_declarator
        | '(' declarator ')' {$$ = $2;} 
        ;

simple_declarator
        : IDENT 
            {
                int ret;
                $$ = ast_newnode(AST_VAR);
                $$->scope = current_scope->scope;
                strcpy($$->attributes.identifier, yylval.yystring);
                $$->attributes.ln_effective = line_number;
                strcpy($$->attributes.file_name, filename);
                ret = insert_ident(current_scope, yylval.yystring, $$, NAMESPACE_OTHER);
                if (!ret){
                    fprintf(stderr, "Error: Previous Declaration of Identifier %s - %s: %d\n", yylval.yystring, filename, line_number);
                }
            }
        ;


initializer
        : assignment_expression
        | '{' initializer_list '}'
        | '{' initializer_list ',' '}'
        ;

initializer_list
        : initializer
        | initializer_list ',' initializer
        | designation initializer
        | initializer_list ',' designation initializer
        ;

designation
        : designator_list '='
        ;

designator_list
        : designator
        | designator_list designator
        ;

designator
        : '[' constant_expression ']'
        | '.' IDENT
        ;

constant_expression
        : conditional_expression
        ;







